<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Efra√≠n Shop</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

  <!-- ====== HEADER ====== -->
  <header>
    <div class="header-inner">
      <div id="menuBtn">‚ò∞</div>
      <div class="logo">Efra√≠n Shop</div>
      <div class="header-actions">
        <input type="text" id="search" placeholder="Buscar..." />
        <button class="login-btn" id="loginBtn">Iniciar sesi√≥n</button>
        <span id="welcomeUser" style="display:none; font-weight:bold; color:white;"></span>
        <button class="login-btn" id="logoutBtn" style="display:none; background:#ff5252;">Cerrar sesi√≥n</button>
        <div id="cartBtn" class="icon" title="Carrito">
          <img src="https://cdn-icons-png.flaticon.com/512/833/833314.png" alt="Carrito" />
        </div>
      </div>
    </div>
  </header>

  <!-- ====== MEN√ö LATERAL ====== -->
  <div class="menu-overlay"></div>
  <nav class="menu-dropdown">
    <span class="menu-close" id="menuClose">‚úï</span>

    <div class="menu-item">Cuenta</div>
    <div class="menu-item">Mis compras</div>

    <div class="menu-item">Productos ‚ñº</div>
    <div class="submenu">
      <div class="menu-item">Gorras</div>
      <div class="menu-item">Camisetas</div>
      <div class="menu-item">Cintos</div>
      <div class="menu-item">Pantalones</div>
      <div class="menu-item">Tenis</div>
      <div class="menu-item">Sudaderas</div>
    </div>

    <div class="menu-item">Nosotros ‚ñº</div>
    <div class="submenu redes">
      <div class="menu-item">Facebook</div>
      <div class="menu-item">Instagram</div>
      <div class="menu-item">TikTok</div>
      <div class="menu-item">WhatsApp</div>
    </div>
  </nav>

  <!-- ====== CONTENIDO ====== -->
  <main>
    <h1 class="page-title">Productos disponibles</h1>
    <section class="grid" id="productsGrid"></section>
  </main>

  <!-- ====== CARRITO ====== -->
  <div class="cart-panel">
    <div class="cart-header">
      <span>Carrito</span>
      <span id="closeCart" style="cursor:pointer;">‚úï</span>
    </div>

    <div class="cart-items">
      <div class="cart-empty">Tu carrito est√° vac√≠o üõçÔ∏è</div>
    </div>

    <div class="cart-footer">
      <div class="cart-total"></div>
      <div class="payment-options">
        <button class="pay-btn paypal" id="paypalBtn">PayPal</button>
        <button class="pay-btn cardpay" id="cardBtn">Tarjeta</button>
      </div>
    </div>
  </div>

  <!-- ====== TOAST ====== -->
  <div class="toast">Producto agregado al carrito</div>

  <!-- ====== SCRIPTS ====== -->
  <script type="module" src="js/script.js"></script>

  <!-- ====== SESI√ìN FIREBASE ====== -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBmv4Wtlg295lfsWh1vpDtOHkxMD34vmUE",
      authDomain: "boutique-buendia.firebaseapp.com",
      projectId: "boutique-buendia",
      storageBucket: "boutique-buendia.firebasestorage.app",
      messagingSenderId: "430651152709",
      appId: "1:430651152709:web:aaa54eeb8e3ba64c43062c",
      measurementId: "G-9KJ2330RN7"
    };

    const app = initializeApp(firebaseConfig);
    getFirestore(app);

    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const welcomeUser = document.getElementById("welcomeUser");

    // Detectar sesi√≥n guardada
    const usuarioActivo = localStorage.getItem("usuarioActivo");

    if (usuarioActivo) {
      welcomeUser.style.display = "inline-block";
      welcomeUser.textContent = `Bienvenido, ${usuarioActivo}`;
      loginBtn.style.display = "none";
      logoutBtn.style.display = "inline-block";
    } else {
      loginBtn.style.display = "inline-block";
      logoutBtn.style.display = "none";
      welcomeUser.style.display = "none";
    }

    // Redirigir a login
    loginBtn.addEventListener("click", () => {
      window.location.href = "login.html";
    });

    // Cerrar sesi√≥n
    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("usuarioActivo");
      location.reload();
    });
  </script>

</body>
</html>
