<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efraín - Tienda Oficial</title>
    <link rel="stylesheet" href="styles.css">
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=MXN"></script>
</head>
<body>

    <!-- HEADER -->
    <header class="header">
        <div class="header-inner">
            <!-- MENÚ HAMBURGUESA -->
            <button class="icon-btn" id millennia="menuToggle" aria-label="Menú">
                <svg viewBox="0 0 24 24">
                    <path d="M3 12h18M3 6h18M3 18h18" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <!-- LOGO -->
            <div class="logo" id="siteName">Efraín</div>

            <!-- DERECHA: BIENVENIDA / LOGIN + BÚSQUEDA + CARRITO -->
            <div style="display: flex; gap: 16px; align-items: center;">
                <div id="userWelcome" style="font-weight: 600; display: none;"></div>
                <button id="loginBtn" style="background: #000; color: #fff; padding: 8px 16px; border-radius: 8px; font-weight: 700; text-transform: uppercase; font-size: 0.9rem;">
                    Iniciar sesión
                </button>

                <button class="icon-btn" id="searchToggle" aria-label="Buscar">
                    <svg viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <button class="icon-btn" id="cartToggle" aria-label="Carrito">
                    <svg viewBox="0 0 24 24">
                        <path d="M9 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM20 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span id="cartBadge">0</span>
                </button>
            </div>
        </div>

        <!-- BÚSQUEDA -->
        <div class="search-container" id="searchContainer">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Buscar productos...">
                <button id="closeSearch" aria-label="Cerrar">×</button>
            </div>
            <div id="searchResults" style="margin-top: 16px; max-height: 60vh; overflow-y: auto;"></div>
        </div>
    </header>

    <!-- MENÚ LATERAL -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <aside class="menu-sidebar" id="menuSidebar">
        <div class="menu-close" id="menuClose">×</div>
        
        <div class="menu-item">Cuenta</div>
        <div class="menu-item">Mis compras</div>
        
        <div class="menu-item">
            <div class="dropdown-toggle" data-target="categorias">Productos ▼</div>
            <div class="submenu" id="categorias">
                <div class="submenu-item" data-cat="gorras">Gorras</div>
                <div class="submenu-item" data-cat="camisetas">Camisetas</div>
                <div class="submenu-item" data-cat="cintos">Cintos</div>
                <div class="submenu-item" data-cat="pantalones">Pantalones</div>
                <div class="submenu-item" data-cat="tenis">Tenis</div>
                <div class="submenu-item" data-cat="sudaderas">Sudaderas</div>
            </div>
        </div>

        <div class="menu-item">
            <div class="dropdown-toggle" data-target="nosotros">Nosotros ▼</div>
            <div class="submenu" id="nosotros">
                <div class="submenu-item"><a href="#" target="_blank">Instagram</a></div>
                <div class="submenu-item"><a href="#" target="_blank">Facebook</a></div>
                <div class="submenu-item"><a href="#" target="_blank">X</a></div>
                <div class="submenu-item"><a href="#" target="_blank">Youtube</a></div>
            </div>
        </div>

        <div class="menu-item" id="logoutBtn" style="display: none;">Salir de mi cuenta</div>
    </aside>

    <!-- CARRITO LATERAL -->
    <aside class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Carrito</h3>
            <div class="menu-close" id="cartClose">×</div>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">Tu carrito está vacío</div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">Total: $<span id="cartTotal">0</span></div>
            <div class="go-to-pay">Ir a pagar</div>
            <div id="paypal-button-container"></div>
            <div id="message"></div>
        </div>
    </aside>

    <!-- TOAST -->
    <div class="toast" id="toast"></div>

    <!-- MANTENIMIENTO -->
    <div id="maintenance" style="display: none; position: fixed; inset: 0; background: #fff; z-index: 9999; text-align: center; padding-top: 20vh; font-size: 2rem; font-weight: 800;">
        Página en mantenimiento
    </div>

    <!-- MAIN -->
    <main class="main-container">

        <!-- HERO -->
        <section class="hero-banner">
            <h1 id="heroTitle">Bienvenido a Efraín</h1>
            <p>Los mejores productos al mejor precio</p>
        </section>

        <!-- CARRUSEL ESTRELLA -->
        <section class="infinite-carousel-section">
            <h2 style="text-align: center; margin-bottom: 24px;">Productos Estrella</h2>
            <div class="infinite-carousel">
                <div class="carousel-track" id="starCarouselTrack"></div>
            </div>
        </section>

        <!-- CARRUSEL NUEVOS -->
        <section class="infinite-carousel-section">
            <h2 style="text-align: center; margin-bottom: 24px;">Nuevos Productos</h2>
            <div class="infinite-carousel">
                <div class="carousel-track" id="newCarouselTrack"></div>
            </div>
        </section>

        <!-- GRID PRODUCTOS -->
        <section>
            <h2 style="text-align: center; margin: 48px 0;">Todos los productos</h2>
            <div class="products-grid" id="productsGrid"></div>
        </section>

    </main>

    <!-- TU SCRIPT AQUÍ (pega todo tu <script> completo) -->
    <script>
        // === PEQUEÑO FIX PARA CARRUSEL INFINITO (duplicar tracks) ===
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.carousel-track').forEach(track => {
                track.innerHTML += track.innerHTML;
            });
        });
    </script>

</body>
</html>
