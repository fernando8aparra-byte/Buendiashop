<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Drop Shop MX - Clon Exacto</title>
  <link rel="stylesheet" href="styles.css"> <!-- Tu CSS completo que te pasé antes -->
  <!-- PayPal SDK OFICIAL (funciona 100% con script externo) -->
  <script src="https://www.paypal.com/sdk/js?client-id=SB_CLIENT_ID_DE_PRUEBA_O_TU_REAL&currency=MXN&intent=capture"></script>
  <style>
    /* Pequeños ajustes extras para que todo quede PERFECTO */
    .logo { text-decoration: none; }
    .menu-item { cursor: pointer; }
  </style>
</head>
<body>

  <!-- HEADER CON ICONOS SVG PERFECTOS -->
  <header class="header">
    <div class="header-inner">
      
      <!-- BOTÓN HAMBURGUESA -->
      <button class="icon-btn" id="menuToggle" aria-label="Menú">
        <svg viewBox="0 0 24 24">
          <path d="M3 12h18M3 6h18M3 18h18" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>

      <!-- LOGO -->
      <a href="/" class="logo">DROP SHOP</a>

      <!-- BOTÓN BÚSQUEDA -->
      <button class="icon-btn" id="searchToggle" aria-label="Buscar">
        <svg viewBox="0 0 24 24">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>

      <!-- BOTÓN CARRITO -->
      <button class="icon-btn" id="cartToggle" aria-label="Carrito">
        <svg viewBox="0 0 24 24">
          <path d="M9 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM20 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span id="cartBadge">0</span>
      </button>

    </div>

    <!-- BARRA DE BÚSQUEDA -->
    <div class="search-container" id="searchContainer">
      <div class="search-bar">
        <input type="text" placeholder="Buscar productos..." id="searchInput" autofocus>
        <button id="closeSearch" class="close-x" aria-label="Cerrar búsqueda">
          <svg viewBox="0 0 24 24">
            <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- MENÚ LATERAL -->
  <div class="menu-overlay" id="menuOverlay"></div>
  <aside class="menu-sidebar" id="menuSidebar">
    <button class="close-x menu-close" id="menuClose" aria-label="Cerrar menú">
      <svg viewBox="0 0 24 24">
        <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div class="menu-item dropdown-toggle">HOMBRE</div>
    <div class="menu-item dropdown-toggle">MUJER</div>
    <div class="menu-item dropdown-toggle">NIÑOS</div>
    <div class="menu-item">SALE</div>
    <div class="menu-item">NOSOTROS</div>
  </aside>

  <!-- CARRITO LATERAL CON PAYPAL -->
  <aside class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h3>Tu Carrito</h3>
      <button class="close-x" id="cartClose" aria-label="Cerrar carrito">
        <svg viewBox="0 0 24 24">
          <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    <div class="cart-items" id="cartItems">
      <p class="empty-cart">Tu carrito está vacío</p>
    </div>
    <div class="cart-footer">
      <div class="cart-total">Total: $<span id="cartTotal">0.00</span></div>
      <div class="go-to-pay">IR A PAGAR</div>
      <div id="paypal-button-container"></div>
      <div id="message"></div>
    </div>
  </aside>

  <!-- TOAST -->
  <div class="toast" id="toast">¡Producto agregado al carrito!</div>

  <!-- CONTENIDO PRINCIPAL (puedes poner tu grid de productos aquí) -->
  <main class="main-container">
    <h1 style="text-align:center;margin:100px 0;">DROP SHOP MX</h1>
    
    <!-- BOTÓN DE PRUEBA PARA AGREGAR AL CARRITO -->
    <button style="display:block;margin:50px auto;padding:15px 40px;background:#000;color:#fff;font-weight:800;border-radius:8px;cursor:pointer;" 
            onclick="addToCart('Zapatillas Drop Fire', 1499.00, 'https://via.placeholder.com/280')">
      AGREGAR PRODUCTO DE PRUEBA $1,499
    </button>
  </main>

  <!-- JAVASCRIPT COMPLETO (todo funciona: menú, búsqueda, carrito, PayPal, toast) -->
  <script>
    // === ELEMENTOS ===
    const menuToggle = document.getElementById('menuToggle');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuSidebar = document.getElementById('menuSidebar');
    const menuClose = document.getElementById('menuClose');

    const searchToggle = document.getElementById('searchToggle');
    const searchContainer = document.getElementById('searchContainer');
    const closeSearch = document.getElementById('closeSearch');

    const cartToggle = document.getElementById('cartToggle');
    const cartSidebar = document.getElementById('cartSidebar');
    const cartClose = document.getElementById('cartClose');
    const cartBadge = document.getElementById('cartBadge');
    const cartItems = document.getElementById('cartItems');
    const cartTotalElem = document.getElementById('cartTotal');
    const toast = document.getElementById('toast');

    let cart = [];

    // === ACTUALIZAR CARRITO ===
    function updateCart() {
      cartItems.innerHTML = '';
      let total = 0;
      if (cart.length === 0) {
        cartItems.innerHTML = '<p class="empty-cart">Tu carrito está vacío</p>';
      } else {
        cart.forEach((item, index) => {
          total += item.price * item.qty;
          const div = document.createElement('div');
          div.className = 'cart-item';
          div.innerHTML = `
            <img src="${item.img}" class="thumb" alt="${item.name}">
            <div>
              <div>${item.name}</div>
              <small>$${item.price.toFixed(2)} MXN</small>
            </div>
            <button onclick="removeFromCart(${index})">×</button>
          `;
          cartItems.appendChild(div);
        });
      }
      cartTotalElem.textContent = total.toFixed(2);
      cartBadge.textContent = cart.length;
      cartBadge.style.display = cart.length > 0 ? 'flex' : 'none';
    }

    // === AGREGAR AL CARRITO ===
    function addToCart(name, price, img) {
      const existing = cart.find(i => i.name === name);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ name, price, qty: 1, img });
      }
      updateCart();
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2200);
    }

    // === REMOVER DEL CARRITO ===
    window.removeFromCart = (index) => {
      cart.splice(index, 1);
      updateCart();
    };

    // === EVENTOS HEADER ===
    menuToggle.onclick = () => {
      menuSidebar.classList.add('open');
      menuOverlay.classList.add('show');
    };
    menuClose.onclick = menuOverlay.onclick = () => {
      menuSidebar.classList.remove('open');
      menuOverlay.classList.remove('show');
    };

    searchToggle.onclick = () => searchContainer.classList.add('active');
    closeSearch.onclick = () => searchContainer.classList.remove('active');

    cartToggle.onclick = () => cartSidebar.classList.add('open');
    cartClose.onclick = () => cartSidebar.classList.remove('open');

    // === PAYPAL BUTTONS (funciona REAL con tu client-id) ===
    paypal.Buttons({
      createOrder: (data, actions) => {
        const total = parseFloat(cartTotalElem.textContent);
        if (total === 0) return;
        return actions.order.create({
          purchase_units: [{
            amount: { value: total.toFixed(2) }
          }]
        });
      },
      onApprove: (data, actions) => {
        return actions.order.capture().then(details => {
          document.getElementById('message').innerHTML = `<div class="success">¡Pago exitoso! Gracias ${details.payer.name.given_name}</div>`;
          cart = [];
          updateCart();
          setTimeout(() => cartSidebar.classList.remove('open'), 3000);
        });
      },
      onError: () => {
        document.getElementById('message').innerHTML = '<div class="error">Error en el pago</div>';
      },
      onCancel: () => {
        document.getElementById('message').innerHTML = '<div class="cancel">Pago cancelado</div>';
      }
    }).render('#paypal-button-container');
  </script>
</body>
</html>
